<%- include('partials/header') %>
<link rel="stylesheet" href="/css/submitStyles.css">

<%- include('partials/sidePanelModal') %>


<div class="topbar">
  <button class="back-button">&#8592;</button>
  <h1 class="title">Create New Poll</h1>
  <button class="submit-button" form="pollForm">Submit</button>
</div>


<div class="form-container">
  <form action="/submit" method="post" class="poll-form" id="pollForm">
    <div class="form-group">
      <label for="pollTitle">Poll Title</label>
      <input type="text" id="pollTitle" name="title" placeholder="What would you like to ask?" required>
    </div>

    <div class="form-group">
      <label for="description">Description (Optional)</label>
      <textarea id="description" name="description" placeholder="Add context to your poll..."></textarea>
    </div>

    <div class="form-group">
      <label>Poll Image (Optional)</label>
      <div class="image-upload">
        <input type="file" id="pollImage" name="image" hidden>
        <label for="pollImage" class="upload-placeholder">
          <div class="upload-icon">&#8593;</div>
          <p>Click to upload an image<br>or drag and drop</p>
        </label>
      </div>
    </div>

    <div class="form-group">
      <label>Poll Options</label>
      <input type="text" name="nominees[]" placeholder="Option 1" required>
      <input type="text" name="nominees[]" placeholder="Option 2" required>
      <button type="button" class="add-option-button" onclick="addNomineeField()">+ Add Option</button>
    </div>

    <div class="form-group">
      <label class="checkbox-label" >
        <input type="checkbox" name="tick">
        Allow multiple responses
      </label>
    </div>

    <button type="submit" class="form-submit-button">Submit Poll</button>
  </form>
</div>

<script>
  function addNomineeField() {
    const input = document.createElement("input");
    input.type = "text";
    input.name = "nominees[]";
    input.placeholder = `Option ${document.querySelectorAll('input[name="nominees[]"]').length + 1}`;
    const addButton = document.querySelector(".add-option-button");
    addButton.before(input);
  }
</script>

<%- include('partials/footer') %>
